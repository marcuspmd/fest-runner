{
  "name": "flow-test-runner",
  "displayName": "Flow Test Runner",
  "description": "Execute and manage Flow Test Engine tests directly from VS Code",
  "version": "0.1.7",
  "publisher": "marcuspmd",
  "repository": {
    "type": "git",
    "url": "https://github.com/marcuspmd/fest-runner"
  },
  "license": "MIT",
  "icon": "media/icon.png",
  "engines": {
    "vscode": "^1.75.0"
  },
  "categories": [
    "Testing",
    "Other"
  ],
  "activationEvents": [
    "workspaceContains:**/*.yml",
    "workspaceContains:**/*.yaml"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "flowTestRunnerContainer",
          "title": "Flow Tests",
          "icon": "media/icon.svg"
        }
      ]
    },
    "views": {
      "flowTestRunnerContainer": [
        {
          "id": "flowTestExplorer",
          "name": "Flow Tests Engine",
          "icon": "media/icon.png"
        }
      ]
    },
    "commands": [
      {
        "command": "flow-test-runner.openTestMaker",
        "title": "Open Test Maker",
        "category": "Flow Test Runner",
        "icon": "$(beaker)"
      },
      {
        "command": "flow-test-runner.refresh",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "flow-test-runner.runTest",
        "title": "Run Test",
        "icon": "$(play)"
      },
      {
        "command": "flow-test-runner.runSuite",
        "title": "Run Suite",
        "icon": "$(play-circle)"
      },
      {
        "command": "flow-test-runner.runWithCache",
        "title": "Run Using Cached Inputs",
        "icon": "$(history)"
      },
      {
        "command": "flow-test-runner.runAll",
        "title": "Run All Tests",
        "icon": "$(run-all)"
      },
      {
        "command": "flow-test-runner.filterTests",
        "title": "Filter Tests",
        "icon": "$(search)"
      },
      {
        "command": "flow-test-runner.clearFilter",
        "title": "Clear Test Filter",
        "icon": "$(clear-all)"
      },
      {
        "command": "flow-test-runner.viewLatestResults",
        "title": "View Latest Results",
        "icon": "$(preview)"
      },
      {
        "command": "flow-test-runner.openTest",
        "title": "Open Test File",
        "icon": "$(go-to-file)"
      },
      {
        "command": "flow-test-runner.retest",
        "title": "Flow Test Engine: Retest Last",
        "icon": "$(debug-restart)"
      },
      {
        "command": "flow-test-runner.retestQa",
        "title": "Flow Test Engine: Retest Last (QA Report)",
        "icon": "$(beaker)"
      },
      {
        "command": "flow-test-runner.generateQaReport",
        "title": "Flow Test Engine: Generate QA HTML Report",
        "icon": "$(report)"
      },
      {
        "command": "flow-test-runner.viewResults",
        "title": "View Results",
        "icon": "$(preview)"
      },
      {
        "command": "flow-test-runner.createConfig",
        "title": "Create Config File",
        "icon": "$(new-file)"
      },
      {
        "command": "flow-test-runner.selectConfig",
        "title": "Select Config File",
        "icon": "$(folder-opened)"
      },
      {
        "command": "flow-test-runner.clearInputCache",
        "title": "Clear Input Cache",
        "icon": "$(clear-all)"
      },
      {
        "command": "flow-test-runner.showCachedInputs",
        "title": "Show Cached Inputs",
        "icon": "$(list-unordered)"
      },
      {
        "command": "flow-test-runner.editCachedInput",
        "title": "Edit Cached Input",
        "icon": "$(edit)"
      },
      {
        "command": "flow-test-runner.importSwagger",
        "title": "Import Swagger/OpenAPI",
        "icon": "$(cloud-download)"
      },
      {
        "command": "flow-test-runner.importPostman",
        "title": "Import Postman Collection",
        "icon": "$(cloud-download)"
      },
      {
        "command": "flow-test-runner.exportPostman",
        "title": "Export to Postman",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "flow-test-runner.exportPostmanFromResults",
        "title": "Export Results to Postman",
        "icon": "$(cloud-upload)"
      },
      {
        "command": "flow-test-runner.rerunLast",
        "title": "Flow Test Engine: Retest Last",
        "icon": "$(debug-restart)"
      },
      {
        "command": "flow-test-runner.rerunCache",
        "title": "Flow Test Runner: Rerun with Cache",
        "icon": "$(history)"
      },
      {
        "command": "flow-test-runner.report",
        "title": "Flow Test Runner: View Test Report",
        "icon": "$(preview)"
      },
      {
        "command": "flow-test-runner.runSuiteWithJsonOutput",
        "title": "Run Suite with JSON Output",
        "icon": "$(json)"
      },
      {
        "command": "flow-test-runner.updateInterfaces",
        "title": "Synchronize Flow Test Interfaces",
        "icon": "$(sync)"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "flow-test-runner.runAll",
          "when": "view == flowTestExplorer",
          "group": "navigation@0"
        },
        {
          "command": "flow-test-runner.refresh",
          "when": "view == flowTestExplorer",
          "group": "navigation@1"
        },
        {
          "command": "flow-test-runner.generateQaReport",
          "when": "view == flowTestExplorer",
          "group": "navigation@2.6"
        },
        {
          "command": "flow-test-runner.viewLatestResults",
          "when": "view == flowTestExplorer",
          "group": "navigation@4"
        },
        {
          "command": "flow-test-runner.filterTests",
          "when": "view == flowTestExplorer",
          "group": "navigation@5"
        },
        {
          "command": "flow-test-runner.clearFilter",
          "when": "view == flowTestExplorer && flowTestRunner.filterActive",
          "group": "navigation@6"
        },
        {
          "command": "flow-test-runner.createConfig",
          "when": "view == flowTestExplorer",
          "group": "secondary@1"
        },
        {
          "command": "flow-test-runner.selectConfig",
          "when": "view == flowTestExplorer",
          "group": "secondary@2"
        },
        {
          "command": "flow-test-runner.importSwagger",
          "when": "view == flowTestExplorer",
          "group": "secondary@3"
        },
        {
          "command": "flow-test-runner.importPostman",
          "when": "view == flowTestExplorer",
          "group": "secondary@4"
        }
      ],
      "view/item/context": [
        {
          "command": "flow-test-runner.runTest",
          "when": "view == flowTestExplorer && viewItem == step-with-id",
          "group": "inline@1"
        },
        {
          "command": "flow-test-runner.runSuite",
          "when": "view == flowTestExplorer && viewItem == suite",
          "group": "inline@1"
        },
        {
          "command": "flow-test-runner.runWithCache",
          "when": "view == flowTestExplorer && viewItem =~ /suite|step-with-id/",
          "group": "inline@2"
        },
        {
          "command": "flow-test-runner.viewResults",
          "when": "view == flowTestExplorer && viewItem =~ /suite|step/",
          "group": "inline@3"
        },
        {
          "command": "flow-test-runner.openTest",
          "when": "view == flowTestExplorer && viewItem =~ /suite|step/",
          "group": "inline@4"
        },
        {
          "command": "flow-test-runner.runSuiteWithJsonOutput",
          "when": "view == flowTestExplorer && viewItem == suite",
          "group": "inline@5"
        },
        {
          "command": "flow-test-runner.exportPostman",
          "when": "view == flowTestExplorer && viewItem == suite",
          "group": "export@1"
        }
      ],
      "commandPalette": [
        {
          "command": "flow-test-runner.retest",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.retestQa",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.generateQaReport",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.viewLatestResults",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.runAll",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.viewResults",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.filterTests",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.clearFilter",
          "when": "workspaceHasFlowTests && flowTestRunner.filterActive"
        },
        {
          "command": "flow-test-runner.createConfig",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.selectConfig",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.clearInputCache",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.showCachedInputs",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.editCachedInput",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.importSwagger",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.importPostman",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.exportPostman",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.exportPostmanFromResults",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.rerunLast",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.rerunCache",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.report",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.runSuiteWithJsonOutput",
          "when": "workspaceHasFlowTests"
        },
        {
          "command": "flow-test-runner.updateInterfaces",
          "when": "workspaceHasFlowTests"
        }
      ]
    },
    "configuration": {
      "title": "Flow Test Runner",
      "properties": {
        "flowTestRunner.command": {
          "type": "string",
          "default": "flow-test-engine",
          "description": "Command to execute Flow Test Engine"
        },
        "flowTestRunner.configFile": {
          "type": "string",
          "description": "Path to custom Flow Test configuration file (relative to workspace or absolute)"
        },
        "flowTestRunner.outputFormat": {
          "type": "string",
          "enum": [
            "json",
            "html",
            "both"
          ],
          "default": "both",
          "description": "Output format for test results"
        },
        "flowTestRunner.reportFormats": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "default": [],
          "description": "Optional list of Flow Test Engine report formats to request via --format (for example [\"json\", \"html\", \"qa\"]). When provided, overrides outputFormat."
        },
        "flowTestRunner.pdfBrowserExecutable": {
          "type": "string",
          "markdownDescription": "Absolute path for a local Chrome/Chromium (or Edge) executable used to render QA reports to PDF. Example: `/Applications/Google Chrome.app/Contents/MacOS/Google Chrome`.",
          "description": "Path to the browser executable used for QA PDF generation."
        },
        "flowTestRunner.pdfOutputSubdir": {
          "type": "string",
          "description": "Optional folder (relative to the Flow Test reporting output directory or absolute) where QA PDF files should be written."
        },
        "flowTestRunner.timeout": {
          "type": "number",
          "default": 30000,
          "description": "Timeout for test execution in milliseconds"
        },
        "flowTestRunner.retryCount": {
          "type": "number",
          "default": 0,
          "minimum": 0,
          "description": "Number of retries for failed tests"
        },
        "flowTestRunner.interfaceUpdateCommand": {
          "type": "string",
          "default": "${command} schema --format=json",
          "markdownDescription": "Comando utilizado para gerar as interfaces atualizadas do Flow Test Engine. O placeholder `${command}` é substituído pelo valor configurado em `flowTestRunner.command`."
        },
        "flowTestRunner.interfaceUpdateOutputFile": {
          "type": "string",
          "default": "flow-test-engine.schema.json",
          "description": "Nome do arquivo salvo no armazenamento da extensão com o resultado da atualização das interfaces do Flow Test Engine."
        },
        "flowTestRunner.interfaceUpdateIntervalHours": {
          "type": "number",
          "default": 6,
          "minimum": 1,
          "description": "Intervalo, em horas, para verificar automaticamente se há novas versões do Flow Test Engine."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run build",
    "build": "npm run typecheck && npm run bundle",
    "typecheck": "tsc --noEmit",
    "bundle": "npm run bundle:extension && npm run bundle:webview",
    "bundle:extension": "esbuild src/extension.ts --bundle --format=cjs --platform=node --external:vscode --external:yaml --sourcemap --outdir=dist",
    "bundle:webview": "mkdir -p dist/webview && cp -r src/ui/webview/* dist/webview/",
    "watch": "esbuild src/extension.ts --bundle --format=cjs --platform=node --external:vscode --external:yaml --sourcemap --outdir=dist --watch",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "devDependencies": {
    "@types/node": "^18.x",
    "@types/vscode": "^1.75.0",
    "esbuild": "^0.25.10",
    "typescript": "^4.9.4",
    "vitest": "^3.2.4"
  },
  "dependencies": {
    "puppeteer-core": "^22.15.0",
    "yaml": "^2.3.4"
  }
}
